<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>üíî MindFlow - Borderline (DBT)</title>
  
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #8B7EB8 0%, #A8D8EA 100%);
      min-height: 100vh;
      padding: 15px;
      padding-bottom: 100px;
    }
    
    .container {
      max-width: 450px;
      margin: 0 auto;
      width: 100%;
      padding: 0 5px;
    }
    
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 25px;
      background: white;
      border-radius: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    
    .back-btn {
      font-size: 24px;
      cursor: pointer;
      text-decoration: none;
    }
    
    .header-title {
      font-size: 20px;
      font-weight: bold;
      color: #ec4899;
    }
    
    .quick-log-card {
      background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
      border-radius: 25px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
      color: white;
    }
    
    .quick-log-title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 15px;
    }
    
    .quick-log-btn {
      width: 100%;
      padding: 15px;
      background: rgba(255,255,255,0.25);
      color: white;
      border: none;
      border-radius: 15px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }
    
    .quick-log-btn:active {
      background: rgba(255,255,255,0.4);
      transform: scale(0.98);
    }
    
    .stats-card {
      background: white;
      border-radius: 25px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
    }
    
    .stat-item {
      background: rgba(236, 72, 153, 0.08);
      padding: 20px;
      border-radius: 15px;
      text-align: center;
    }
    
    .stat-value {
      font-size: 32px;
      font-weight: bold;
      color: #ec4899;
      margin-bottom: 5px;
    }
    
    .stat-label {
      font-size: 13px;
      color: #666;
    }
    
    .section-card {
      background: white;
      border-radius: 25px;
      padding: 25px;
      margin-bottom: 15px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
    }
    
    .section-title {
      font-size: 20px;
      font-weight: bold;
      color: #2D2D3A;
      margin-bottom: 20px;
    }
    
    .skill-item {
      background: rgba(236, 72, 153, 0.05);
      border-radius: 15px;
      padding: 18px;
      margin-bottom: 12px;
      cursor: pointer;
      transition: all 0.2s;
      border-left: 4px solid #ec4899;
    }
    
    .skill-item:active {
      background: rgba(236, 72, 153, 0.1);
      transform: scale(0.98);
    }
    
    .skill-name {
      font-size: 17px;
      font-weight: bold;
      color: #ec4899;
      margin-bottom: 5px;
    }
    
    .skill-desc {
      font-size: 14px;
      color: #666;
      line-height: 1.5;
    }
    
    .skill-usage {
      font-size: 13px;
      color: #999;
      margin-top: 8px;
    }
    
    .log-item {
      background: rgba(236, 72, 153, 0.05);
      border-radius: 15px;
      padding: 18px;
      margin-bottom: 12px;
      border-left: 4px solid #ec4899;
    }
    
    .log-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
    }
    
    .log-emotion {
      font-size: 17px;
      font-weight: bold;
      color: #2D2D3A;
    }
    
    .log-intensity {
      background: #ec4899;
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 13px;
      font-weight: bold;
    }
    
    .log-date {
      font-size: 13px;
      color: #999;
      margin-bottom: 8px;
    }
    
    .log-trigger {
      font-size: 14px;
      color: #666;
      margin-bottom: 8px;
    }
    
    .log-skill {
      font-size: 14px;
      color: #ec4899;
      font-weight: 600;
    }
    
    .empty-state {
      text-align: center;
      padding: 40px 20px;
      color: #999;
    }
    
    .empty-icon {
      font-size: 60px;
      margin-bottom: 15px;
    }
    
    .empty-text {
      font-size: 16px;
    }
    
    .bottom-nav {
      position: fixed;
      bottom: 15px;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      border-radius: 25px;
      padding: 15px 25px;
      display: flex;
      gap: 35px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.12);
      z-index: 1000;
      max-width: 350px;
      width: calc(100% - 40px);
      justify-content: center;
    }
    
    .nav-item {
      font-size: 26px;
      cursor: pointer;
      transition: all 0.3s;
      opacity: 0.4;
      text-decoration: none;
    }
    
    .nav-item.active {
      opacity: 1;
      transform: scale(1.15);
    }
    
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 3000;
      display: none;
    }
    
    .modal-overlay.show {
      display: block;
      animation: fadeIn 0.3s ease;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    
    .modal {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border-radius: 25px;
      padding: 30px;
      max-width: 90%;
      width: 400px;
      max-height: 80vh;
      overflow-y: auto;
      z-index: 3001;
      display: none;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }
    
    .modal.show {
      display: block;
      animation: slideUp 0.3s ease;
    }
    
    @keyframes slideUp {
      from { transform: translate(-50%, -40%); opacity: 0; }
      to { transform: translate(-50%, -50%); opacity: 1; }
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }
    
    .modal-title {
      font-size: 22px;
      font-weight: bold;
      color: #2D2D3A;
    }
    
    .modal-close {
      font-size: 28px;
      cursor: pointer;
      color: #888;
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-label {
      font-size: 15px;
      font-weight: 600;
      color: #2D2D3A;
      margin-bottom: 8px;
      display: block;
    }
    
    .form-input {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #E5E5E5;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      outline: none;
      transition: border 0.3s;
    }
    
    .form-input:focus {
      border-color: #ec4899;
    }
    
    .form-textarea {
      width: 100%;
      min-height: 80px;
      padding: 12px 15px;
      border: 2px solid #E5E5E5;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      outline: none;
      transition: border 0.3s;
      resize: vertical;
    }
    
    .form-textarea:focus {
      border-color: #ec4899;
    }
    
    .form-select {
      width: 100%;
      padding: 12px 15px;
      border: 2px solid #E5E5E5;
      border-radius: 12px;
      font-size: 15px;
      font-family: inherit;
      outline: none;
      transition: border 0.3s;
      background: white;
    }
    
    .form-select:focus {
      border-color: #ec4899;
    }
    
    .intensity-slider {
      width: 100%;
      height: 8px;
      border-radius: 5px;
      outline: none;
      -webkit-appearance: none;
      background: linear-gradient(to right, #10b981 0%, #f59e0b 50%, #ef4444 100%);
    }
    
    .intensity-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: white;
      border: 3px solid #ec4899;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    .intensity-slider::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: white;
      border: 3px solid #ec4899;
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    }
    
    .intensity-value {
      text-align: center;
      font-size: 32px;
      font-weight: bold;
      color: #ec4899;
      margin-bottom: 10px;
    }
    
    .save-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
      color: white;
      border: none;
      border-radius: 15px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.3s;
    }
    
    .save-btn:active {
      transform: scale(0.98);
    }
    
    .skill-detail {
      background: rgba(236, 72, 153, 0.05);
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 15px;
    }
    
    .skill-detail-title {
      font-size: 16px;
      font-weight: bold;
      color: #ec4899;
      margin-bottom: 10px;
    }
    
    .skill-detail-text {
      font-size: 14px;
      color: #666;
      line-height: 1.6;
    }
    
    .skill-steps {
      list-style: none;
      padding: 0;
    }
    
    .skill-steps li {
      padding: 8px 0;
      padding-left: 25px;
      position: relative;
      font-size: 14px;
      color: #666;
    }
    
    .skill-steps li:before {
      content: "‚Üí";
      position: absolute;
      left: 0;
      color: #ec4899;
      font-weight: bold;
    }
    
    .success-message {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 30px 40px;
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      text-align: center;
      z-index: 4000;
      display: none;
    }
    
    .success-message.show {
      display: block;
      animation: popup 0.3s ease;
    }
    
    @keyframes popup {
      from { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
      to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }
    
    .success-icon {
      font-size: 60px;
      margin-bottom: 15px;
    }
    
    .success-text {
      font-size: 20px;
      font-weight: bold;
      color: #2D2D3A;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <a href="index.html" class="back-btn">‚Üê</a>
      <div class="header-title">Borderline (DBT)</div>
      <div style="width: 24px;"></div>
    </div>
    
    <div class="quick-log-card">
      <div class="quick-log-title">Journal √©motionnel</div>
      <button class="quick-log-btn" onclick="openLogModal()">üìù Logger une √©motion</button>
    </div>
    
    <div class="stats-card">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-value" id="totalLogs">0</div>
          <div class="stat-label">√âmotions logg√©es</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="avgIntensity">0</div>
          <div class="stat-label">Intensit√© moyenne</div>
        </div>
      </div>
    </div>
    
    <div class="section-card">
      <div class="section-title">Skills DBT</div>
      <div id="skillsList"></div>
    </div>
    
    <div class="section-card">
      <div class="section-title">Historique √©motionnel</div>
      <div id="logsList"></div>
    </div>
  </div>
  
  <div class="bottom-nav">
    <a href="index.html" class="nav-item">üè†</a>
    <a href="mood.html" class="nav-item">üòä</a>
    <a href="journal.html" class="nav-item">üìù</a>
    <a href="traitement.html" class="nav-item">üíä</a>
    <a href="profil.html" class="nav-item">üë§</a>
  </div>
  
  <!-- Log Emotion Modal -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal()"></div>
  <div class="modal" id="logModal">
    <div class="modal-header">
      <div class="modal-title">Logger une √©motion</div>
      <div class="modal-close" onclick="closeModal()">√ó</div>
    </div>
    
    <div class="form-group">
      <label class="form-label">√âmotion principale</label>
      <input type="text" class="form-input" id="emotionName" placeholder="Ex: Col√®re, Tristesse, Peur...">
    </div>
    
    <div class="form-group">
      <label class="form-label">Intensit√©</label>
      <div class="intensity-value" id="intensityDisplay">5</div>
      <input type="range" class="intensity-slider" id="emotionIntensity" min="1" max="10" value="5" oninput="updateIntensity()">
    </div>
    
    <div class="form-group">
      <label class="form-label">D√©clencheur</label>
      <textarea class="form-textarea" id="emotionTrigger" placeholder="Qu'est-ce qui a d√©clench√© cette √©motion ?"></textarea>
    </div>
    
    <div class="form-group">
      <label class="form-label">Skill utilis√© (optionnel)</label>
      <select class="form-select" id="skillUsed">
        <option value="">Aucun</option>
        <option value="DEAR MAN">DEAR MAN</option>
        <option value="STOP">STOP</option>
        <option value="TIPP">TIPP</option>
        <option value="Respiration">Respiration profonde</option>
        <option value="Pleine conscience">Pleine conscience</option>
        <option value="Distraction">Distraction</option>
        <option value="Auto-apaisement">Auto-apaisement</option>
      </select>
    </div>
    
    <div class="form-group">
      <label class="form-label">Efficacit√© du skill (1-10)</label>
      <input type="range" class="intensity-slider" id="skillEffectiveness" min="1" max="10" value="5">
    </div>
    
    <button class="save-btn" onclick="saveLog()">üíö Enregistrer</button>
  </div>
  
  <!-- Skill Detail Modal -->
  <div class="modal" id="skillModal">
    <div class="modal-header">
      <div class="modal-title" id="skillModalTitle"></div>
      <div class="modal-close" onclick="closeModal()">√ó</div>
    </div>
    
    <div id="skillModalContent"></div>
  </div>
  
  <div class="success-message" id="successMessage">
    <div class="success-icon">‚úÖ</div>
    <div class="success-text">Enregistr√© !</div>
  </div>
  
  <script>
    const dbtSkills = [
      {
        name: "DEAR MAN",
        desc: "Technique de communication efficace pour demander ce que tu veux",
        steps: [
          "Describe (D√©crire) : D√©cris la situation objectivement",
          "Express (Exprimer) : Exprime tes sentiments",
          "Assert (Affirmer) : Demande clairement ce que tu veux",
          "Reinforce (Renforcer) : Explique les b√©n√©fices",
          "Mindful (Pleine conscience) : Reste concentr√© sur ton objectif",
          "Appear confident (Para√Ætre confiant) : Reste calme et assertif",
          "Negotiate (N√©gocier) : Sois pr√™t(e) √† faire des compromis"
        ]
      },
      {
        name: "STOP",
        desc: "Gestion de l'impulsivit√© et des comportements √† risque",
        steps: [
          "Stop (Arr√™te) : Fige-toi, ne bouge plus",
          "Take a step back (Recule) : Prends du recul mentalement",
          "Observe (Observe) : Remarque ce qui se passe en toi",
          "Proceed mindfully (Agis consciemment) : Choisis ta r√©action"
        ]
      },
      {
        name: "TIPP",
        desc: "R√©gulation rapide en crise intense",
        steps: [
          "Temperature (Temp√©rature) : Eau froide sur le visage",
          "Intense exercise (Exercice intense) : Bouge rapidement",
          "Paced breathing (Respiration rythm√©e) : Respire lentement",
          "Progressive muscle relaxation (Relaxation musculaire) : Contracte et rel√¢che"
        ]
      },
      {
        name: "Respiration profonde",
        desc: "Calmer le syst√®me nerveux par la respiration",
        steps: [
          "Inspire par le nez pendant 4 secondes",
          "Retiens ta respiration 4 secondes",
          "Expire par la bouche pendant 6 secondes",
          "R√©p√®te 5-10 fois"
        ]
      },
      {
        name: "Pleine conscience",
        desc: "Rester dans le moment pr√©sent sans jugement",
        steps: [
          "Observe tes pens√©es sans les juger",
          "D√©cris ce que tu vis objectivement",
          "Participe pleinement √† l'instant",
          "Reste non-jugeant envers toi-m√™me"
        ]
      },
      {
        name: "Distraction",
        desc: "√âloigner temporairement l'attention de la douleur √©motionnelle",
        steps: [
          "Activit√©s : Fais quelque chose d'engageant",
          "Contribuer : Aide quelqu'un d'autre",
          "Comparaisons : Compare √† un moment pire",
          "√âmotions oppos√©es : G√©n√®re une √©motion diff√©rente",
          "Pousser mentalement : Pense √† autre chose",
          "Sensations : Utilise tes 5 sens"
        ]
      }
    ];
    
    function updateIntensity() {
      const value = document.getElementById('emotionIntensity').value;
      document.getElementById('intensityDisplay').textContent = value;
    }
    
    function loadDBT() {
      loadSkills();
      loadLogs();
      calculateStats();
    }
    
    function loadSkills() {
      const logs = JSON.parse(localStorage.getItem('mindflow_dbt_logs') || '[]');
      const list = document.getElementById('skillsList');
      
      list.innerHTML = dbtSkills.map(skill => {
        const usageCount = logs.filter(l => l.skill === skill.name).length;
        return `
          <div class="skill-item" onclick="viewSkill('${skill.name}')">
            <div class="skill-name">${skill.name}</div>
            <div class="skill-desc">${skill.desc}</div>
            <div class="skill-usage">Utilis√© ${usageCount} fois</div>
          </div>
        `;
      }).join('');
    }
    
    function viewSkill(skillName) {
      const skill = dbtSkills.find(s => s.name === skillName);
      if (!skill) return;
      
      document.getElementById('skillModalTitle').textContent = skill.name;
      
      const steps = skill.steps.map(step => `<li>${step}</li>`).join('');
      
      document.getElementById('skillModalContent').innerHTML = `
        <div class="skill-detail">
          <div class="skill-detail-title">Description</div>
          <div class="skill-detail-text">${skill.desc}</div>
        </div>
        <div class="skill-detail">
          <div class="skill-detail-title">Comment l'utiliser</div>
          <ul class="skill-steps">${steps}</ul>
        </div>
      `;
      
      document.getElementById('modalOverlay').classList.add('show');
      document.getElementById('skillModal').classList.add('show');
    }
    
    function loadLogs() {
      const logs = JSON.parse(localStorage.getItem('mindflow_dbt_logs') || '[]');
      const list = document.getElementById('logsList');
      
      if (logs.length === 0) {
        list.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üíî</div>
            <div class="empty-text">Aucune √©motion logg√©e</div>
          </div>
        `;
        return;
      }
      
      list.innerHTML = logs.map(log => {
        const date = new Date(log.date);
        const dateStr = date.toLocaleDateString('fr-FR', { day: 'numeric', month: 'short', hour: '2-digit', minute: '2-digit' });
        
        return `
          <div class="log-item">
            <div class="log-header">
              <div class="log-emotion">${log.emotion}</div>
              <div class="log-intensity">${log.intensity}/10</div>
            </div>
            <div class="log-date">${dateStr}</div>
            <div class="log-trigger">${log.trigger}</div>
            ${log.skill ? `<div class="log-skill">Skill: ${log.skill} (Efficacit√©: ${log.effectiveness}/10)</div>` : ''}
          </div>
        `;
      }).join('');
    }
    
    function calculateStats() {
      const logs = JSON.parse(localStorage.getItem('mindflow_dbt_logs') || '[]');
      
      document.getElementById('totalLogs').textContent = logs.length;
      
      if (logs.length === 0) {
        document.getElementById('avgIntensity').textContent = '0';
        return;
      }
      
      const total = logs.reduce((sum, log) => sum + log.intensity, 0);
      const avg = (total / logs.length).toFixed(1);
      document.getElementById('avgIntensity').textContent = avg;
    }
    
    function openLogModal() {
      document.getElementById('emotionName').value = '';
      document.getElementById('emotionIntensity').value = 5;
      document.getElementById('intensityDisplay').textContent = 5;
      document.getElementById('emotionTrigger').value = '';
      document.getElementById('skillUsed').value = '';
      document.getElementById('skillEffectiveness').value = 5;
      
      document.getElementById('modalOverlay').classList.add('show');
      document.getElementById('logModal').classList.add('show');
    }
    
    function saveLog() {
      const emotion = document.getElementById('emotionName').value.trim();
      const intensity = document.getElementById('emotionIntensity').value;
      const trigger = document.getElementById('emotionTrigger').value.trim();
      const skill = document.getElementById('skillUsed').value;
      const effectiveness = document.getElementById('skillEffectiveness').value;
      
      if (!emotion || !trigger) {
        alert('Remplis l\'√©motion et le d√©clencheur ! üíö');
        return;
      }
      
      let logs = JSON.parse(localStorage.getItem('mindflow_dbt_logs') || '[]');
      
      logs.unshift({
        id: Date.now(),
        emotion: emotion,
        intensity: parseInt(intensity),
        trigger: trigger,
        skill: skill,
        effectiveness: skill ? parseInt(effectiveness) : null,
        date: new Date().toISOString()
      });
      
      localStorage.setItem('mindflow_dbt_logs', JSON.stringify(logs));
      
      closeModal();
      showSuccess();
      loadDBT();
    }
    
    function closeModal() {
      document.getElementById('modalOverlay').classList.remove('show');
      document.querySelectorAll('.modal').forEach(modal => modal.classList.remove('show'));
    }
    
    function showSuccess() {
      const msg = document.getElementById('successMessage');
      msg.classList.add('show');
      setTimeout(() => msg.classList.remove('show'), 1500);
    }
    
    loadDBT();
  </script>
  <script src="luna-bubble.js"></script>
```

**5Ô∏è‚É£ Commit !**

**Message :**
```
Borderline - Ajout bulle Luna
</body>
</html>
```

---

## ‚úÖ **MESSAGE DE COMMIT :**
```
Cr√©ation module Borderline (DBT) avec skills complets
